(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8897:function(e,t,n){Promise.resolve().then(n.bind(n,5380)),Promise.resolve().then(n.bind(n,346)),Promise.resolve().then(n.t.bind(n,8003,23)),Promise.resolve().then(n.t.bind(n,4749,23)),Promise.resolve().then(n.t.bind(n,9045,23)),Promise.resolve().then(n.t.bind(n,734,23)),Promise.resolve().then(n.t.bind(n,7960,23))},5380:function(e,t,n){"use strict";n.d(t,{R:function(){return s},TrackingProvider:function(){return c}});var r=n(7437),o=n(2265),i=n(3464);let a=(0,o.createContext)(void 0),c=e=>{let{children:t}=e,[n,c]=(0,o.useState)(null),[s,l]=(0,o.useState)([]),u=(0,o.useRef)(Date.now()),d=(0,o.useRef)(0),m=(0,o.useRef)(Date.now()),f=(0,o.useRef)(!0),g=(0,o.useRef)("".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))),h=(0,o.useRef)("visit_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,15))),w=(0,o.useRef)(0),v=(0,o.useRef)(0),p=(0,o.useRef)(0),y=(0,o.useRef)(1),b=(0,o.useRef)(!1),k=(0,o.useRef)(!1),E=(0,o.useRef)(!1),_=(0,o.useRef)(!1),A=async()=>{try{let e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){console.warn("No se pudo obtener la IP:",e);return}},T=async()=>{try{let e=await fetch("https://ipinfo.io/json");return(await e.json()).city}catch(e){console.warn("No se pudo obtener la localidad:",e);return}},D=()=>{if("connection"in navigator){let e=navigator.connection;return{connectionType:e.effectiveType||e.type,effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}}return{}},S=()=>{let e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),n=/iPad|Android(?=.*\bMobile\b)(?=.*\bSafari\b)/i.test(e);return{isMobile:t,isTablet:n,isDesktop:!t&&!n,touchSupport:"ontouchstart"in window}},Z=async()=>{let e=await A();return{visitUid:h.current,userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,screenWidth:window.screen.width,screenHeight:window.screen.height,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio,...D(),ipAddress:e,city:await T(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,sessionStartTime:u.current,totalActiveTime:f.current?d.current+(Date.now()-m.current):d.current,lastActivityTime:m.current,pageViews:y.current,clicks:v.current,scrollDepth:p.current,mouseMovements:w.current,referrer:document.referrer,currentUrl:window.location.href,...S(),sessionId:g.current,timestamp:Date.now()}},L=async()=>{if(b.current){console.log("Ya hay una llamada de tracking en progreso, saltando...");return}try{b.current=!0,E.current=!0,setTimeout(()=>{E.current=!1,console.log("Flag hasSentBeforeUnload reseteado")},5e3);let e=await Z(),t="http://localhost:3003/send-event",n="EAAOHUgAkJWEBO1iItDP97MZBU2nuB3UZBQoLZC7clyVAdmL5VE5z9UJr9lomC8OSsQyrZB6BG9TMAiD2N3AnmLV3JZCpzThWpHdwiuin1xZCM3pYqDCHclUbmVZBWb4iZAZAr9TbDyhTDzktHTZAHRmAtL2K3lDw3BXmjAcOYVZAvg2Q9A16sWv8uru2PfYp6tbUhJuygZDZD",r="515055784659980";if(!t)throw Error("Endpoint no configurado");if(!n)throw Error("Access Token no configurado");if(!r)throw Error("Pixel ID no configurado");let o=await i.Z.post("".concat(t,"/tracking"),{trackingData:e,events:s,access_token:n,pixel_id:r},{headers:{"Content-Type":"application/json"},timeout:1e4});return console.log("Datos de tracking enviados exitosamente:",o.data),o.data}catch(e){throw console.error("Error enviando datos de tracking:",e),C(),e}finally{b.current=!1}},C=()=>{try{Z().then(e=>{let t=localStorage.getItem("trackingData"),n=t?JSON.parse(t):[];n.push({trackingData:e,events:s,timestamp:Date.now()}),localStorage.setItem("trackingData",JSON.stringify(n))})}catch(e){console.error("Error guardando en localStorage:",e)}},P=async()=>{if(_.current){console.log("Init tracking ya fue enviado, saltando...");return}try{_.current=!0;let e="http://localhost:3003/send-event",t="515055784659980";if(!e)throw Error("Endpoint no configurado");let n={visitUid:h.current,sessionId:g.current,page_id:t||null,timestamp:Date.now(),access_token:"EAAOHUgAkJWEBO1iItDP97MZBU2nuB3UZBQoLZC7clyVAdmL5VE5z9UJr9lomC8OSsQyrZB6BG9TMAiD2N3AnmLV3JZCpzThWpHdwiuin1xZCM3pYqDCHclUbmVZBWb4iZAZAr9TbDyhTDzktHTZAHRmAtL2K3lDw3BXmjAcOYVZAvg2Q9A16sWv8uru2PfYp6tbUhJuygZDZD",pixel_id:t||null},r=await i.Z.post("".concat(e,"/init-tracking"),n,{headers:{"Content-Type":"application/json"},timeout:1e4});return console.log("Init tracking enviado exitosamente:",r.data),r.data}catch(e){throw console.error("Error enviando init tracking:",e),B(),e}},B=()=>{try{let e="515055784659980",t={visitUid:h.current,sessionId:g.current,page_id:e||null,timestamp:Date.now(),access_token:"EAAOHUgAkJWEBO1iItDP97MZBU2nuB3UZBQoLZC7clyVAdmL5VE5z9UJr9lomC8OSsQyrZB6BG9TMAiD2N3AnmLV3JZCpzThWpHdwiuin1xZCM3pYqDCHclUbmVZBWb4iZAZAr9TbDyhTDzktHTZAHRmAtL2K3lDw3BXmjAcOYVZAvg2Q9A16sWv8uru2PfYp6tbUhJuygZDZD",pixel_id:e||null},n=localStorage.getItem("initTrackingData"),r=n?JSON.parse(n):[];r.push({...t,created_at:new Date().toISOString()}),localStorage.setItem("initTrackingData",JSON.stringify(r)),console.log("Init tracking guardado en localStorage como fallback")}catch(e){console.error("Error guardando init tracking en localStorage:",e)}},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:e,data:t,timestamp:Date.now(),visitUid:h.current};l(e=>[...e,n])},O=()=>{f.current||(f.current=!0,m.current=Date.now())},U=()=>{f.current&&(d.current+=Date.now()-m.current,f.current=!1)},M=()=>{let e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-window.innerHeight;p.current=Math.max(p.current,e/t*100)};return(0,o.useEffect)(()=>{let e,t;if(k.current)return;k.current=!0,console.log("Inicializando Tracking Provider..."),P().catch(e=>{console.error("Error en init tracking:",e)}),Z().then(c);let n=()=>{O(),I("focus")},r=()=>{U(),I("blur")},o=()=>{"hidden"===document.visibilityState?U():O()},i=()=>{M(),clearTimeout(e),e=setTimeout(()=>{I("scroll",{scrollDepth:p.current})},100)},a=()=>{v.current++,I("click",{clicks:v.current})},s=()=>{w.current++,clearTimeout(t),t=setTimeout(()=>{w.current%10==0&&I("scroll",{mouseMovements:w.current})},1e3)},l=()=>{U(),b.current||E.current?console.log("Saltando env\xedo en beforeunload (ya se envi\xf3 recientemente)"):(console.log("Enviando tracking data en beforeunload..."),L())},u=()=>{window.performance&&window.performance.timing&&I("page_view",{pageLoadTime:window.performance.timing.loadEventEnd-window.performance.timing.navigationStart})};window.addEventListener("focus",n),window.addEventListener("blur",r),document.addEventListener("visibilitychange",o),window.addEventListener("scroll",i),window.addEventListener("click",a),window.addEventListener("mousemove",s),window.addEventListener("beforeunload",l),window.addEventListener("load",u);let d=setInterval(async()=>{c(await Z())},3e4);return()=>{console.log("Limpiando Tracking Provider..."),clearInterval(d),window.removeEventListener("focus",n),window.removeEventListener("blur",r),document.removeEventListener("visibilitychange",o),window.removeEventListener("scroll",i),window.removeEventListener("click",a),window.removeEventListener("mousemove",s),window.removeEventListener("beforeunload",l),window.removeEventListener("load",u),b.current||E.current?console.log("Saltando env\xedo en cleanup (ya se envi\xf3 recientemente)"):(console.log("Enviando tracking data en cleanup..."),L())}},[]),(0,r.jsx)(a.Provider,{value:{trackingData:n,sendTrackingData:L,sendInitTracking:P,incrementPageViews:()=>{y.current++},getSessionId:()=>g.current,getVisitUid:()=>h.current,getEvents:()=>s},children:t})},s=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useUserTracking debe ser usado dentro de TrackingProvider");return e}},346:function(e,t,n){"use strict";n.d(t,{ThemeProvider:function(){return v}});var r=n(7437),o=n(2265),i=(e,t,n,r,o,i,a,c)=>{let s=document.documentElement,l=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&i?o.map(e=>i[e]||e):o;n?(s.classList.remove(...r),s.classList.add(i&&i[t]?i[t]:t)):s.setAttribute(e,t)}),c&&l.includes(t)&&(s.style.colorScheme=t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n,r=a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(r)}catch(e){}},a=["light","dark"],c="(prefers-color-scheme: dark)",s="undefined"==typeof window,l=o.createContext(void 0),u=e=>o.useContext(l)?o.createElement(o.Fragment,null,e.children):o.createElement(m,{...e}),d=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:r=!0,enableColorScheme:i=!0,storageKey:s="theme",themes:u=d,defaultTheme:m=r?"system":"light",attribute:v="data-theme",value:p,children:y,nonce:b,scriptProps:k}=e,[E,_]=o.useState(()=>g(s,m)),[A,T]=o.useState(()=>"system"===E?w():E),D=p?Object.values(p):u,S=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&r&&(t=w());let o=p?p[t]:t,c=n?h(b):null,s=document.documentElement,l=e=>{"class"===e?(s.classList.remove(...D),o&&s.classList.add(o)):e.startsWith("data-")&&(o?s.setAttribute(e,o):s.removeAttribute(e))};if(Array.isArray(v)?v.forEach(l):l(v),i){let e=a.includes(m)?m:null,n=a.includes(t)?t:e;s.style.colorScheme=n}null==c||c()},[b]),Z=o.useCallback(e=>{let t="function"==typeof e?e(E):e;_(t);try{localStorage.setItem(s,t)}catch(e){}},[E]),L=o.useCallback(e=>{T(w(e)),"system"===E&&r&&!t&&S("system")},[E,t]);o.useEffect(()=>{let e=window.matchMedia(c);return e.addListener(L),L(e),()=>e.removeListener(L)},[L]),o.useEffect(()=>{let e=e=>{e.key===s&&(e.newValue?_(e.newValue):Z(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[Z]),o.useEffect(()=>{S(null!=t?t:E)},[t,E]);let C=o.useMemo(()=>({theme:E,setTheme:Z,forcedTheme:t,resolvedTheme:"system"===E?A:E,themes:r?[...u,"system"]:u,systemTheme:r?A:void 0}),[E,Z,t,A,r,u]);return o.createElement(l.Provider,{value:C},o.createElement(f,{forcedTheme:t,storageKey:s,attribute:v,enableSystem:r,enableColorScheme:i,defaultTheme:m,value:p,themes:u,nonce:b,scriptProps:k}),y)},f=o.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:r,enableSystem:a,enableColorScheme:c,defaultTheme:s,value:l,themes:u,nonce:d,scriptProps:m}=e,f=JSON.stringify([r,n,s,t,u,l,a,c]).slice(1,-1);return o.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(i.toString(),")(").concat(f,")")}})}),g=(e,t)=>{let n;if(!s){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},h=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},w=e=>(e||(e=window.matchMedia(c)),e.matches?"dark":"light");function v(e){let{children:t,...n}=e;return(0,r.jsx)(u,{...n,children:t})}},7960:function(){},9045:function(e){e.exports={style:{fontFamily:"'__Anton_c05830', '__Anton_Fallback_c05830'",fontWeight:400,fontStyle:"normal"},className:"__className_c05830",variable:"__variable_c05830"}},734:function(e){e.exports={style:{fontFamily:"'__Luckiest_Guy_e61f6e', '__Luckiest_Guy_Fallback_e61f6e'",fontWeight:400,fontStyle:"normal"},className:"__className_e61f6e",variable:"__variable_e61f6e"}},4749:function(e){e.exports={style:{fontFamily:"'__Montserrat_46efbc', '__Montserrat_Fallback_46efbc'",fontWeight:400,fontStyle:"normal"},className:"__className_46efbc",variable:"__variable_46efbc"}}},function(e){e.O(0,[579,884,971,117,744],function(){return e(e.s=8897)}),_N_E=e.O()}]);